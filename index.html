<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technological Agriculture Tower Defense</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Main Menu -->
    <div id="main-menu" class="overlay show">
        <div class="modal">
            <h1>Technological Agriculture Tower Defense (TATD)</h1>
            <h2>Đề tài: Vai trò ứng dụng công nghệ trong nông nghiệp Việt Nam</h2>
            <div class="research-questions">
                <h3>Câu hỏi nghiên cứu:</h3>
                <ol>
                    <li>Công nghệ nào đang được áp dụng trong nông nghiệp Việt Nam, và hiệu quả ra sao?</li>
                    <li>Các vấn đề nông nghiệp truyền thống gặp phải mà công nghệ có thể giải quyết là gì?</li>
                    <li>Ứng dụng công nghệ có tác động xã hội, kinh tế hay môi trường như thế nào?</li>
                </ol>
            </div>
            <p class="instructions">
                <strong>Hướng dẫn:</strong> Chặn đường đi của sâu bệnh bằng cách đặt các tháp công nghệ. Mỗi tháp có một vai trò riêng. Nâng cấp chúng để mạnh hơn. Sống sót qua 10 đợt tấn công để hoàn thành nghiên cứu!
            </p>
            <button id="start-game-btn">Bắt Đầu</button>
        </div>
    </div>

    <!-- Main Game Container -->
    <div id="game-container" class="game-container hidden">
        <!-- Top UI Bar -->
        <div class="ui-bar top-bar">
            <div>Tiền: $<span id="money">500</span></div>
            <div>Mạng: <span id="lives">20</span></div>
            <div>Đợt: <span id="wave">0/10</span></div>
            <button id="start-wave-btn" disabled>Bắt đầu Đợt</button>
        </div>

        <!-- Main Content (Canvas + Side Panel) -->
        <div class="main-content">
            <!-- Game Canvas -->
            <canvas id="game-canvas"></canvas>

            <!-- Tower Shop & Info Panel -->
            <div class="side-panel">
                <div id="tower-shop">
                    <h3>Cửa Hàng Công Nghệ</h3>
                    <!-- Tower buttons will be generated by JS -->
                </div>
                <div id="tower-info" class="hidden">
                    <h3><span id="tower-info-name">Thông Tin Tháp</span></h3>
                    <ul id="tower-info-details">
                        <li>Chọn một tháp để xem thông tin</li>
                    </ul>
                    <button id="upgrade-btn">Nâng cấp</button>
                    <button id="sell-btn">Bán</button>
                </div>
            </div>
        </div>
        
        <!-- Bottom UI Bar -->
        <div class="ui-bar bottom-bar">
             <button id="research-questions-btn">Xem lại Câu hỏi</button>
             <button id="open-reflection-btn">Phân tích & Phản ánh</button>
        </div>
    </div>
    
    <!-- Research Modal -->
    <div id="research-modal" class="overlay hidden">
        <div class="modal">
            <h2>Câu hỏi nghiên cứu</h2>
            <div class="research-questions">
                <ol>
                    <li>Công nghệ nào đang được áp dụng trong nông nghiệp Việt Nam, và hiệu quả ra sao?</li>
                    <li>Các vấn đề nông nghiệp truyền thống gặp phải mà công nghệ có thể giải quyết là gì?</li>
                    <li>Ứng dụng công nghệ có tác động xã hội, kinh tế hay môi trường như thế nào?</li>
                </ol>
            </div>
            <button id="close-research-btn">Đóng</button>
        </div>
    </div>

    <!-- Reflection Modal -->
    <div id="reflection-modal" class="overlay hidden">
        <div class="modal">
            <h2>Phân Tích & Phản Ánh</h2>
            <div id="final-stats"></div>
            <div class="reflection-prompt">
                <label for="reflection-input">Theo bạn, công nghệ nào hiệu quả nhất trong việc bảo vệ mùa màng? Ghi nhận ý kiến của mình:</label>
                <textarea id="reflection-input" rows="5" placeholder="1. ...&#10;2. ...&#10;3. ..."></textarea>
            </div>
            <button id="close-reflection-btn">Đóng</button>
        </div>
    </div>

    <!-- Wave Summary Modal -->
    <div id="wave-summary-modal" class="overlay hidden">
        <div class="modal">
            <div id="wave-summary-content">
                <!-- Content generated by JS -->
            </div>
            <button id="next-wave-btn">Tiếp tục</button>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="game-over-modal" class="overlay hidden">
        <div class="modal">
            <h2>Nghiên Cứu Thất Bại!</h2>
            <p>Sâu bệnh đã phá hủy mùa màng. Hãy thử lại.</p>
            <button id="restart-game-btn">Chơi Lại</button>
        </div>
    </div>

    <script src="game.js" type="module"></script>
</body>
</html>